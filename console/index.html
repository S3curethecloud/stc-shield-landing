<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>STC Shield ‚Äî Console Preview</title>

  <!-- Core styles -->
  <link rel="stylesheet" href="/css/shield.css" />
  <link rel="stylesheet" href="/css/shield-console.css" />

  <!-- üîí GOVERNED CSP (PATCHED ‚Äî API ENABLED) -->
  <meta
    http-equiv="Content-Security-Policy"
    content="
      default-src 'self';
      script-src 'self';
      style-src 'self' 'unsafe-inline';
      connect-src 'self' https://stc-intelligence-core.fly.dev;
      img-src 'self' data:;
    "
  />
</head>

<body>

<nav class="console-nav">
  <a href="/" class="back-link" aria-label="Back to STC Shield landing">
    ‚Üê Back to STC Shield
  </a>
</nav>

<main class="console-layout">

  <!-- =========================
       LEFT: FINDINGS
       ========================= -->
  <aside class="console-findings"
         role="listbox"
         aria-label="Shield findings"
         aria-describedby="findings-help"
         aria-activedescendant="">

    <h2
      data-tooltip="Deterministic findings computed from the identity graph. No simulation. No guesswork.">
      Shield Findings
    </h2>

    <p id="findings-help" class="visually-hidden">
      Use arrow keys to navigate findings. Press Enter to select.
    </p>

    <p id="finding-detail-hint" class="visually-hidden">
      Details for the selected finding are available in the center panel.
    </p>

    <!-- üî• STATIC LIST REMOVED ‚Äî NOW DYNAMIC -->
    <ul class="findings-list" role="presentation">
      <!-- console-data.js will inject <li> items here -->
    </ul>

    <p class="panel-footnote">
      Findings are computed deterministically from identity graphs.
    </p>

  </aside>

  <!-- =========================
       CENTER: DETAIL (UNCHANGED)
       ========================= -->
  <section class="console-detail"
           id="finding-detail-panel"
           role="region"
           aria-labelledby="detail-heading">

    <h2 id="detail-heading"
        data-tooltip="Detailed explanation of why this identity or path is reachable.">
      Finding Detail
    </h2>

    <div class="detail-block">
      <h3>Why is this reachable?</h3>
      <p id="detail-why">
        Select a finding to view deterministic path details.
      </p>
    </div>

    <div class="detail-block">
      <h3>Impact</h3>
      <p id="detail-impact">
        ‚Äî
      </p>
    </div>

    <div class="detail-block">
      <h3>Constraints</h3>
      <ul>
        <li>Read-only visibility</li>
        <li>No configuration mutation</li>
        <li>No automated remediation</li>
      </ul>
    </div>

  </section>

  <!-- =========================
       RIGHT: AI (UNCHANGED STRUCTURE)
       ========================= -->
  <aside class="console-ai"
         role="region"
         aria-labelledby="ai-heading"
         aria-live="polite"
         aria-busy="false"
         aria-disabled="true">

    <h2 id="ai-heading"
        data-tooltip="AI-assisted explanations derived strictly from Shield findings.">
      AI-Augmented Reasoning
    </h2>

    <p
      class="ai-state disabled ai-subtitle"
      data-tooltip="Select a finding first. AI explanations require an active identity or attack path.">
      Select a finding to enable AI explanations.
    </p>

    <button
      class="ai-btn btn secondary disabled"
      aria-disabled="true"
      aria-describedby="ai-hint"
      disabled>
      Explain with STC AI
    </button>

    <p id="ai-hint" class="visually-hidden">
      AI explanations are read-only and grounded in Shield data.
    </p>

    <div class="ai-output">

      <h3>Explanation</h3>
      <p class="muted">AI explanations are grounded in Shield data only.</p>

      <h3>Citations</h3>
      <ul class="citations muted">
        <li>No datasets referenced.</li>
      </ul>

    </div>

  </aside>

</main>

<!-- üî• DATA LAYER (NEW) -->
<script src="/js/console-data.js"></script>

<!-- üî• AI LOGIC -->
<script src="/js/console-ai.js"></script>

</body>
</html>
