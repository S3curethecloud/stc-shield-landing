<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>STC Shield ‚Äî Identity Attack Path Detection</title>
  <meta
    name="description"
    content="STC Shield is a multi-cloud identity attack-path detection engine exposing how identities can be abused across AWS, Azure, and GCP."
  />

  <link rel="stylesheet" href="/css/shield.css" />

  <!-- Cloudflare Web Analytics -->
  <script
    defer
    src="https://static.cloudflareinsights.com/beacon.min.js"
    data-cf-beacon='{"token": "REPLACE_WITH_YOUR_TOKEN"}'>
  </script>
</head>

<body>

<header class="nav">
  <div class="nav-inner">
    <div class="brand">SecureTheCloud</div>
    <nav>
      <a href="/">Home</a>
      <a href="/shield" class="active">Shield</a>
      <a href="/ai">AI</a>
      <a href="/labs">Labs</a>
      <a href="/consulting">Consulting</a>
    </nav>
  </div>
</header>

<main>

  <!-- HERO -->
  <section class="hero">
    <h1>STC Shield</h1>
    <p class="subtitle">
      Multi-cloud identity attack-path detection.
      <br />
      Model how attackers move through trust ‚Äî before they do.
    </p>

    <div class="cta-group">
      <a
        class="btn primary"
        href="https://shield.securethecloud.dev"
        target="_blank"
        rel="noopener">
        Launch Shield Console
      </a>

      <a class="btn secondary" href="/request-demo/">
        Request Shield Demo
      </a>
    </div>

    <p class="note">
      Live identity risk view. Expired cloud sessions are blocked by design.
    </p>
  </section>

  <!-- SHIELD CONSOLE PREVIEW -->
  <section class="section">
    <h2>Shield Console Preview</h2>

    <div class="grid">
      <a href="https://shield.securethecloud.dev/visualize/" class="card-link">
        <div class="card">
          <div class="card-icon">üõ°Ô∏è</div>
          <h3>STC Shield Console Preview</h3>
          <p>Operator console ‚Äî read-only by design</p>
        </div>
      </a>

      <a href="https://shield.securethecloud.dev/visualize/?view=graph" class="card-link">
        <div class="card">
          <div class="card-icon">üß†</div>
          <h3>Attack Path Graph Visualization</h3>
          <p>Identity attack paths ‚Äî severity-aware graph</p>
        </div>
      </a>
    </div>
  </section>

  <!-- STC AI INTERACTION -->
  <section class="section contrast">
    <h2>Ask STC AI</h2>
    <p class="subtitle">
      Query identity attack paths, trust relationships, and risk reasoning.
    </p>

    <!-- Compliance disclaimer -->
    <p class="note">
      AI explanations are generated from deterministic Shield data and do not modify system state.
    </p>

    <div class="ai-panel">
      <input
        id="ai-input"
        type="text"
        placeholder="Ask STC AI..."
      />

      <button id="ai-btn" class="btn primary">
        Ask
      </button>

      <h3>Question</h3>
      <div id="ai-question"></div>

      <h3>Explanation</h3>
      <details open>
        <summary>AI Reasoning</summary>
        <pre id="ai-explanation"></pre>
      </details>

      <h3>Result</h3>
      <pre id="ai-result"></pre>

      <h3>Citations</h3>
      <ul id="ai-citations"></ul>
    </div>
  </section>

  <!-- STC SHIELD ARCHITECTURE -->
  <section id="architecture" class="section contrast">
    <h2>STC Shield Architecture</h2>

    <figure class="media-card">
      <img
        src="/diagrams/shield-architecture.svg"
        alt="STC Shield architecture diagram"
      />
      <figcaption>
        Identity data ingestion ‚Üí attack path modeling ‚Üí operator visualization ‚Üí
        Phase 2 AI reasoning.
      </figcaption>
    </figure>
  </section>

</main>

<footer class="footer">
  <p>¬© SecureTheCloud ‚Ä¢ STC Shield</p>
</footer>

<!-- STC AI CONFIG + CLIENT -->
<script src="/js/config.js"></script>
<script src="/js/ai.js"></script>

<!-- AI UX POLISH (AUTHORITATIVE) -->
<script>
  document.querySelector("#ai-btn").addEventListener("click", async () => {
    const q = document.querySelector("#ai-input").value.trim();
    if (!q) return;

    document.querySelector("#ai-question").textContent = q;
    document.querySelector("#ai-explanation").textContent = "Thinking‚Ä¶";
    document.querySelector("#ai-result").textContent = "";
    document.querySelector("#ai-citations").innerHTML = "";

    try {
      const payload = await askSTCAI(q);
      renderAnswer(payload);
    } catch (err) {
      document.querySelector("#ai-explanation").textContent =
        "Unable to retrieve explanation at this time.";
      alert(err.message);
    }
  });

  // Graceful empty citations handling
  function renderAnswer(payload) {
    const { result, explanation, citations } = payload;

    document.querySelector("#ai-result").textContent = result || "";
    document.querySelector("#ai-explanation").textContent = explanation || "";

    const citeEl = document.querySelector("#ai-citations");
    citeEl.innerHTML = "";

    if (!citations || citations.length === 0) {
      const li = document.createElement("li");
      li.textContent = "No datasets referenced for this query.";
      citeEl.appendChild(li);
      return;
    }

    citations.forEach(c => {
      const li = document.createElement("li");
      li.textContent = c;
      citeEl.appendChild(li);
    });
  }
</script>

</body>
</html>
